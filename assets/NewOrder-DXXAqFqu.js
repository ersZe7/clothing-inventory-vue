import{h as k,i as w,c as v,a as s,o as l,b as o,j as S,k as d,t as i,v as b,q as f,F as c,d as x,u as N,l as q,e as I}from"./index-olbwxA3H.js";import{u as O}from"./productStore-Bwr21y1d.js";import{u as V}from"./orderStore-bU9OvEgP.js";const P={key:0,class:"text-red-600 mb-3"},U=["value"],F=["disabled"],j={__name:"AddOrderForm",setup(y){const m=O(),u=V(),n=k(""),t=w({customer:"",phone:"",productId:"",size:"",quantity:1}),a=v(()=>m.products.find(p=>p.id===Number(t.productId))),z=v(()=>a.value?Object.keys(a.value.sizes):[]),g=()=>{if(!t.customer||!t.phone||!t.productId||!t.size){n.value="Please fill all fields";return}if(a.value.sizes[t.size]<t.quantity){n.value="Not enough stock for selected size";return}u.createOrder({customer:t.customer,phone:t.phone,productId:Number(t.productId),productName:a.value.name,size:t.size,quantity:t.quantity}),Object.assign(t,{customer:"",phone:"",productId:"",size:"",quantity:1}),n.value=""};return(p,e)=>(l(),s("form",{onSubmit:q(g,["prevent"]),class:"bg-white border rounded p-6 max-w-xl"},[e[7]||(e[7]=o("h2",{class:"text-xl font-semibold mb-1"}," Create Order ",-1)),n.value?(l(),s("p",P,i(n.value),1)):S("",!0),e[8]||(e[8]=o("label",{class:"block text-sm text-gray-600 mb-1"}," Customer name ",-1)),d(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.customer=r),class:"border p-2 w-full mb-3"},null,512),[[b,t.customer]]),e[9]||(e[9]=o("label",{class:"block text-sm text-gray-600 mb-1"}," Phone number ",-1)),d(o("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.phone=r),class:"border p-2 w-full mb-3"},null,512),[[b,t.phone]]),e[10]||(e[10]=o("label",{class:"block text-sm text-gray-600 mb-1"}," Product ",-1)),d(o("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.productId=r),class:"border p-2 w-full mb-3"},[e[5]||(e[5]=o("option",{value:""},"Select product",-1)),(l(!0),s(c,null,x(N(m).products,r=>(l(),s("option",{key:r.id,value:r.id},i(r.name),9,U))),128))],512),[[f,t.productId]]),e[11]||(e[11]=o("label",{class:"block text-sm text-gray-600 mb-1"}," Size ",-1)),d(o("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.size=r),class:"border p-2 w-full mb-3",disabled:!a.value},[e[6]||(e[6]=o("option",{value:""},"Select size",-1)),(l(!0),s(c,null,x(z.value,r=>(l(),s("option",{key:r},i(r)+" ("+i(a.value.sizes[r])+") ",1))),128))],8,F),[[f,t.size]]),e[12]||(e[12]=o("label",{class:"block text-sm text-gray-600 mb-1"}," Quantity ",-1)),d(o("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>t.quantity=r),type:"number",min:"1",class:"border p-2 w-full mb-4"},null,512),[[b,t.quantity,void 0,{number:!0}]]),e[13]||(e[13]=o("button",{class:"bg-green-600 text-white px-4 py-2 rounded"}," Place order ",-1))],32))}},D={__name:"NewOrder",setup(y){return(m,u)=>(l(),s("div",null,[u[0]||(u[0]=o("h1",{class:"text-2xl font-bold mb-1"},"New Order",-1)),u[1]||(u[1]=o("p",{class:"text-gray-600 mb-6"}," Fill in the form to create a new order ",-1)),I(j)]))}};export{D as default};
