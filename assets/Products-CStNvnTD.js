import{u as g}from"./productStore-0Djz6UEw.js";import{r as v,a as l,o as n,b as e,F as x,d as h,e as f,f as k,g as w,t as a,h as P,i as L,j as z,k as m,v as _,l as S,m as V,n as $,u}from"./index-BhoNZVaI.js";const A={class:"w-full border bg-white text-sm"},M={class:"p-3 text-primary hover:underline"},N={class:"p-3"},B={class:"p-3 text-center"},F={class:"p-3 text-center"},T={class:"p-3 text-center"},U={class:"p-3 text-center"},X={class:"p-3 text-center font-medium"},j={__name:"ProductTable",props:{products:Array},setup(p){const o=i=>Object.values(i.sizes).reduce((s,t)=>s+t,0);return(i,s)=>{const t=v("router-link");return n(),l("table",A,[s[0]||(s[0]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"p-3 text-left"},"Name"),e("th",{class:"p-3 text-left"},"Price"),e("th",{class:"p-3 text-center"},"S"),e("th",{class:"p-3 text-center"},"M"),e("th",{class:"p-3 text-center"},"L"),e("th",{class:"p-3 text-center"},"XL"),e("th",{class:"p-3 text-center"},"Total")])],-1)),e("tbody",null,[(n(!0),l(x,null,h(p.products,r=>(n(),l("tr",{key:r.id,class:"border-t hover:bg-gray-50 transition"},[e("td",M,[f(t,{to:`/products/${r.id}`},{default:k(()=>[w(a(r.name),1)]),_:2},1032,["to"])]),e("td",N,a(r.price),1),e("td",B,a(r.sizes.S),1),e("td",F,a(r.sizes.M),1),e("td",T,a(r.sizes.L),1),e("td",U,a(r.sizes.XL),1),e("td",X,a(o(r)),1)]))),128))])])}}},C={key:0,class:"text-red-600 mb-3"},D={class:"grid grid-cols-4 gap-3 mb-4"},E=["onUpdate:modelValue","placeholder"],O={__name:"AddProductForm",emits:["add"],setup(p,{emit:o}){const i=o,s=P(""),t=L({name:"",price:"",sizes:{S:0,M:0,L:0,XL:0}}),r=()=>{if(!t.name||!t.price){s.value="Please fill product name and price";return}i("add",{name:t.name,price:Number(t.price),sizes:{...t.sizes}}),t.name="",t.price="",Object.keys(t.sizes).forEach(b=>t.sizes[b]=0),s.value=""};return(b,d)=>(n(),l("form",{class:"bg-white border rounded p-6 mb-8",onSubmit:S(r,["prevent"])},[d[2]||(d[2]=e("h2",{class:"text-xl font-semibold mb-1"},"Add new product",-1)),s.value?(n(),l("p",C,a(s.value),1)):z("",!0),m(e("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>t.name=c),placeholder:"Product name",class:"border p-2 w-full mb-3"},null,512),[[_,t.name]]),m(e("input",{"onUpdate:modelValue":d[1]||(d[1]=c=>t.price=c),type:"number",placeholder:"Price",class:"border p-2 w-full mb-4"},null,512),[[_,t.price]]),e("div",D,[(n(),l(x,null,h(["S","M","L","XL"],c=>m(e("input",{key:c,"onUpdate:modelValue":y=>t.sizes[c]=y,type:"number",min:"0",placeholder:c,class:"border p-2 w-full"},null,8,E),[[_,t.sizes[c],void 0,{number:!0}]])),64))]),d[3]||(d[3]=e("button",{class:"bg-blue-600 text-white px-4 py-2 rounded"}," Add product ",-1))],32))}},q={key:0,class:"text-gray-500"},G={key:1,class:"text-red-600"},J={__name:"Products",setup(p){const o=g();return V(()=>{o.loadProductsFromApi()}),(i,s)=>(n(),l("div",null,[s[0]||(s[0]=e("h1",{class:"text-2xl font-bold mb-1"},"Products",-1)),f(O,{class:"mb-6",onAdd:u(o).addProduct},null,8,["onAdd"]),u(o).loading?(n(),l("p",q," Loading products... ")):u(o).error?(n(),l("p",G,a(u(o).error),1)):(n(),$(j,{key:2,products:u(o).products},null,8,["products"]))]))}};export{J as default};
